[toc]

## I/O设备管理

I/O设备即输入/输出设备，是用于计算机系统与人通信或与其他机器通信的所有设备，以及所有外存设备

### 1. I/O系统的组成

I/O系统不仅包括各种I/O设备，还包括与设备相连的设备控制器，有些系统还配备了专门用于输入/输出控制的专用计算机，即<font style=color:red>通道</font>。此外，<font style=color:red>I/O系统要通过总线与CPU、内存相连</font>。

#### 1.1 I/O系统的结构

##### 微机I/O系统（总线型I/O系统）

在DMA出现以前，<font style=color:red>必须通过CPU申请总线权限后才能访问内存</font>。

![image-20220929084317788](images/image-20220929084317788.png)

##### 主机I/O系统

![image-20220929084348208](images/image-20220929084348208.png)



#### 1.2 I/O设备的分类

![image-20220929084609737](images/image-20220929084609737.png)



#### 1.3 设备控制器

##### 简介

控制器是可编址的设备，因为<font style=color:red>CPU是根据地址去访问资源的</font>，所以发送的就是一个设备的地址。

![image-20220929084824812](images/image-20220929084824812.png)

##### 功能

控制器是<font style=color:red>可编址的设备</font>，因为CPU是根据地址去访问资源的，所以发送的就是一个设备的地址。

![image-20220930004510466](images/image-20220930004510466.png)

##### 组成

![image-20220929084925451](images/image-20220929084925451.png)



#### 1.4 I/O通道

##### 简介

​			![image-20220930001928874](images/image-20220930001928874.png)



### 2. I/O控制方式

I/O控制方式的发展，经历了以下四种方式。

![image-20220930005217802](images/image-20220930005217802.png)

#### 2.1 轮询控制

![image-20220930005359229](images/image-20220930005359229.png)



#### 2.2 中断控制

##### 原理

![image-20220930005925993](images/image-20220930005925993.png)

![image-20220930010003361](images/image-20220930010003361.png)



#### 2.3 DMA控制（直接存储控制）

在DMA出现以前，<font style=color:red>必须通过CPU申请总线权限后才能访问内存</font>。现在外围设备可以通过  <font style=color:red>DMA技术 </font> 来访问内存。

##### DMA控制器结构

![image-20220930011712476](images/image-20220930011712476.png)

##### DMA控制器中的寄存器

为了实现主机与设备控制器之间成块数据的传送，在DMA控制器中设计了4类寄存器：

![image-20220930012418600](images/image-20220930012418600.png)

##### DMA工作原理

![image-20220930012921284](images/image-20220930012921284.png)

![image-20220930013418506](images/image-20220930013418506.png)



#### 2.4 通道控制







### 3. 缓冲管理



### 4. 设备分配



### 5. I/O软件原理



### 6. 磁盘管理