## 一、存储器的层次



## 二、程序的链接和加载（装入）

高级语言程序必须经过编译、链接才能成为可执行程序，操作系统需要为程序的执行分配内存空间。

链接

- 静态链接：先比链接编译好可执行程序，然后再执行
- 动态链接：一边执行一边链接

装入/加载

重定位 = 地址映射

- 绝对装入：按照装入模块的物理地址将程序和数据装入内存
- 静态重定位：装入时对目标程序的逻辑地址进行重定位/地址映射到物理地址
- 动态重定位：程序执行时，再通过重定位/地址映射转换为物理地址



## 三、存储管理方式

### 1. 连续分配

什么叫连续分配？

分配内存的时候分配一块连续的空间给进程。

#### 1.1 单一连续分配

适用于单道系统

#### 1.2 固定分区分配

划分几个大小不变的分区，且每个分区只能装入一个作业。因为是固定的，所以由上下限寄存器来决定每个分区的大小。

有一个固定分区说明表，来说明各分区的地址、状态



#### 1.3 动态分区分配

根据装入作业的大小，来动态分配内存给作业

有个空闲分区表，来说明用户空间空闲的地址和大小

有个**空闲分区链**，来说明用户空间空闲的地址和大小，每个结点都有开始地址和大小。空闲分区链分配算法如下

- **首次适应算法：**每次都链表头开始找，缺点是容易产生空间碎片
- **循环首次适应算法：**每次都从上次分配的分区的下个分区开始找。优点是空闲区分配均匀，坏处是缺乏大块的空闲区，且容易产生碎片
- **最佳适应算法：**将分区按空间大小排序，然后按首次适应算法分配分区，优点是可以提高利用率，缺点是容易产生碎片

##### 1.3.1 分配流程



##### 1.3.2 回收流程

1. 释放一块连续的内存空间
2. 如有**相邻的空闲空间**，则**合并**
3. **修改空闲分区链的起始地址和大小**



### 2. 分页分配