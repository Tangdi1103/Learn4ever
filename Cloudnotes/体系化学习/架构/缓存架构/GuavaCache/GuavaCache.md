[toc]

## 一、Guava Cache 综述

#### 1. 简介

**Guava**是Google提供的一套 **Java工具包**，而**Guava Cache是一套非常完善的本地缓存机制**（JVM缓存）。

Guava cache的设计来源于 **CurrentHashMap**，可以按照**多种策略**来**清理**存储在其中的**缓存值**且保持很高的**并发读写性能**。

#### 2. 使用场景及优势

- 可用于**[直读直写模式](../缓存设计)（Read/Write Through Pattern）**

  **load方法**中加以控制，对同一个key，只让**一个线程去读源并回填缓存**，其他线程阻塞等待

- 用于**并发要求高**的缓存设计

  类似于CurrentHashMap，提供了并发级别的api，**支持并发读写**，**采用分离锁机制**（能够减小锁粒度，将一个集合拆分成若干个Segment分别控制锁，提升并发能力）

- 集成数据源

  Guava Cache的**get方法集成了数据源**，若缓存没数据则**自动读取数据源回填缓存**

- 用于访问整个集合

- 用于数据要求**不强一致性**的场景

- 用于**缓存过期及淘汰策略**的场景

  采用**LRU**方式，淘汰缓存中的键值对

#### 2. 缺陷

- 不能持久化
- 不能做集群





## 二、实战



