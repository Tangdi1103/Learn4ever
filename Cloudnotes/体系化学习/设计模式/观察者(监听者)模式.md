[toc]

## Observer—行为模式

观察者模式也叫监听者模式。

比如，你端来一盆狗粮喂狗子，然后就此离开去看书，当狗子吃完的时候让他主动来通知你它吃完了。这里你怎么用代码来实现？



##### 通过异步和回调来实现事件的通知/监听

准备实体类：Dog，接口：Watcher监听者

创建Dog，并传入Watcher实现类，调用Dog.eat方法，eat方法内部分配线程执行方法并返回feture，当线程执行完eat逻辑，然后调用传入的Wacher实现类的回调方法，通知主人Dog吃完的事件



##### 改进

通过模板方法模式改进Watcher。提供抽象模板实现一个监听骨架方法，然后由自定义Watcher继承该抽象模板。当Dog中的方法执行完时，调用模板方法的骨架，进行一些处理，然后调用自定义子类的具体实现方法，传入事件类型，通知主人响应的事件